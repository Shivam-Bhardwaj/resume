<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{{name}} Resume</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap');

        @page {
            margin: {{#if layout.pageMargin}}{{layout.pageMargin}}{{else}}0.4in 0.5in{{/if}};
            size: letter;
        }

        * {
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0f172a;
            /* Slate 900 */
            --accent-color: #2563eb;
            /* Blue 600 */
            --text-main: #334155;
            /* Slate 700 */
            --text-light: #64748b;
            /* Slate 500 */
            --border-color: #e2e8f0;
            /* Slate 200 */

            /* Layout knobs (bounded tweaks for fit-to-pages) */
            --base-font-size: {{#if layout.baseFontSize}}{{layout.baseFontSize}}{{else}}9pt{{/if}};
            --base-line-height: {{#if layout.lineHeight}}{{layout.lineHeight}}{{else}}1.25{{/if}};
            --container-gap: {{#if layout.containerGap}}{{layout.containerGap}}{{else}}5px{{/if}};
            --job-gap: {{#if layout.jobGap}}{{layout.jobGap}}{{else}}5px{{/if}};
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--text-main);
            line-height: var(--base-line-height);
            /* Aggressive reduction */
            margin: 0;
            padding: 0;
            font-size: var(--base-font-size);
            background-color: #fff;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            width: 100%;
            min-height: auto;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: var(--container-gap);
            /* Minimal gap */
        }

        /* HEADER */
        .header-section {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 4px;
            margin-bottom: 2px;
            text-align: center;
        }

        h1 {
            font-family: 'Merriweather', serif;
            font-size: 20pt;
            /* Reduced */
            font-weight: 700;
            margin: 0;
            color: var(--primary-color);
            line-height: 1.0;
        }

        .tagline {
            font-size: 9pt;
            /* Reduced */
            font-weight: 500;
            color: var(--accent-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 2px;
        }

        .contact-info-header {
            font-size: 8.5pt;
            color: var(--text-main);
            margin-top: 1px;
            line-height: 1.4;
        }

        .separator {
            margin: 0 4px;
            color: var(--accent-color);
            opacity: 0.6;
        }

        .contact-info-header a {
            color: var(--text-main);
            text-decoration: none;
        }

        /* SUMMARY */
        .summary {
            text-align: justify;
            margin-bottom: 3px;
        }

        /* SECTIONS */
        .section-title {
            font-size: 9.5pt;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1px;
            margin-bottom: 2px;
        }

        /* Subtle accent rule to reduce perceived whitespace and improve scanning */
        .section-title::after {
            content: '';
            display: block;
            width: 44px;
            height: 2px;
            background: var(--accent-color);
            margin-top: 1px;
            border-radius: 2px;
            opacity: 0.85;
        }

        /* Skills Grid */
        .skills-grid {
            display: grid;
            grid-template-columns: max-content 1fr max-content 1fr;
            row-gap: 4px;
            align-items: baseline;
        }

        .skill-row {
            display: contents;
        }

        /* Add spacing between the two main columns */
        .skill-row:nth-child(odd) .skill-list {
            margin-right: 20px;
        }

        .skill-cat-name {
            font-weight: 700;
            color: var(--primary-color);
            margin-right: 6px;
            white-space: nowrap;
        }

        .skill-list {
            color: var(--text-main);
            line-height: 1.2;
        }

        /* Job Header */
        .job {
            margin-bottom: var(--job-gap);
            /* Minimal margin */
        }

        /* Force Velodyne role header to appear on page 2 (prevents orphaned bullets without context) */
        .job[data-job-id="velodyne"] {
            break-before: page;
            page-break-before: always;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
        }

        /* Prevent orphaned job headers at the bottom of a page */
        .job-header,
        .job-subtitle {
            break-after: avoid-page;
            page-break-after: avoid;
        }

        .job ul {
            break-before: avoid-page;
            page-break-before: avoid;
        }

        .job-title {
            font-size: 9.5pt;
            font-weight: 700;
            color: var(--primary-color);
        }

        .job-company {
            font-weight: 600;
            color: var(--text-main);
        }

        .job-location {
            font-weight: 500;
            color: var(--text-light);
            font-size: 9pt;
        }

        .job-dates {
            font-size: 9pt;
            color: var(--text-main);
            font-weight: 600;
        }

        .job-subtitle {
            font-size: 9pt;
            color: var(--accent-color);
            font-style: italic;
            margin-bottom: 1px;
        }

        .job ul {
            margin: 0;
            padding-left: 14px;
        }

        .job li {
            margin-bottom: 0px;
            /* No margin between items */
            font-size: inherit;
            color: var(--text-main);
            text-align: justify;
        }

        /* Marked wraps list-item text in <p> tags; remove default spacing */
        .job li p {
            margin: 0;
        }

        .job li::marker {
            color: var(--accent-color);
            font-size: 0.8em;
        }

        /* Fit-to-pages support: optional bullets start hidden and may be enabled by the PDF fitter */
        .fit-optional {
            display: none;
        }

        /* Education */
        .edu-item-row {
            margin-bottom: 1px;
            font-size: 9pt;
        }

        .edu-degree {
            font-weight: 700;
            color: var(--primary-color);
        }

        .edu-school {
            font-style: italic;
        }

        .summary p {
            text-align: justify;
            margin: 0;
        }

        .visa-badge {
            display: inline-block;
            background: #dcfce7;
            color: #166534;
            padding: 1px 6px;
            border-radius: 12px;
            font-size: 7.5pt;
            font-weight: 600;
            margin-top: 2px;
            border: 1px solid #86efac;
        }
    </style>
</head>

<body>
    <div class="container">

        <!-- HEADER SECTION -->
        <header class="header-section">
            <h1>{{name}}</h1>
            <div class="tagline">{{tagline}}</div>

            <!-- Contact Info (Split into two rows for better spacing) -->
            <div class="contact-info-header">
                <span>{{contact.location}}</span>
                <span class="separator">|</span>
                <span><a href="tel:{{contact.phone}}">{{contact.phone}}</a></span>
                <span class="separator">|</span>
                <span><a href="mailto:{{contact.email}}">{{contact.email}}</a></span>
            </div>
            <div class="contact-info-header">
                <span><a href="{{contact.website}}">shivambhardwaj.com</a></span>
                <span class="separator">|</span>
                <span><a href="{{contact.linkedin}}">LinkedIn</a></span>
                <span class="separator">|</span>
                <span><a href="{{contact.github}}">GitHub</a></span>
                {{#if contact.resumeSource}}
                <span class="separator">|</span>
                <span><a href="{{contact.resumeSource}}">Resume Source Code</a></span>
                {{/if}}
                {{#if showVisaBadge}}
                <span class="separator">|</span>
                <span class="visa-badge">{{visaBadgeText}}</span>
                {{/if}}
            </div>
        </header>

        <!-- SUMMARY -->
        {{#if sections.summary}}
        <div class="section">
            <div class="section-title">Professional Summary</div>
            <div class="summary">
                {{{md summary}}}
            </div>
        </div>
        {{/if}}

        <!-- SKILLS / EXPERTISE -->
        {{#if sections.skills}}
        <div class="section">
            <div class="section-title">Expertise</div>
            <div class="skills-grid">
                {{#each skills}}
                <div class="skill-row">
                    <span class="skill-cat-name">{{@key}}:</span>
                    <span class="skill-list">
                        {{#each this}}
                        <span class="skill-item">{{this}}</span>{{#unless @last}}, {{/unless}}
                        {{/each}}
                    </span>
                </div>
                {{/each}}
            </div>
        </div>
        {{/if}}

        <!-- EXPERIENCE -->
        {{#if sections.experience}}
        <div class="section">
            <div class="section-title">Experience</div>
            {{#each experience}}
            <div class="job" data-job-id="{{id}}">
                <div class="job-header">
                    <div>
                        <span class="job-title">{{title}}</span>
                        <span class="job-company"> | {{company}}</span>{{#if location}}<span class="job-location"> â€” {{location}}</span>{{/if}}
                    </div>
                    <span class="job-dates">{{dates}}</span>
                </div>
                {{#if subtitle}}
                <div class="job-subtitle">{{subtitle}}</div>
                {{/if}}
                <ul>
                    {{#each bullets}}
                    <li data-job-id="{{../id}}" data-bullet-id="{{id}}" data-fit-rank="{{fit_rank}}" data-fit-score="{{fit_score}}" class="{{#if fit_optional}}fit-optional{{/if}}">{{{md text}}}</li>
                    {{/each}}
                </ul>
            </div>
            {{/each}}
        </div>
        {{/if}}

        <!-- EDUCATION (Moved from sidebar) -->
        {{#if sections.education}}
        <div class="section">
            <div class="section-title">Education</div>
            {{#each education}}
            <div class="edu-item-row">
                <span class="edu-degree">{{degree}}</span>
                <span class="edu-school">, {{school}}</span>
                {{#if detail}}
                <span class="edu-detail"> - {{detail}}</span>
                {{/if}}
            </div>
            {{/each}}
        </div>
        {{/if}}

    </div>
</body>

</html>